// Auto-generated by workflow-sdk generate-slash-types
// Do not edit this file manually

/**
 * Union type of all available slash command names
 */
export type SlashCommandName = "/cmd:add-spec" | "/cmd:audit" | "/cmd:create-pr" | "/cmd:generate-bug-spec" | "/cmd:generate-feature-spec" | "/cmd:generate-issue-spec" | "/cmd:generate-prd" | "/cmd:generate-spec" | "/cmd:implement-spec" | "/cmd:list-specs" | "/cmd:move-spec" | "/cmd:review-spec-implementation";

/**
 * Mapping of command names to their argument types
 */
export interface SlashCommandArgs {
  "/cmd:add-spec": { "specId": string };
  "/cmd:audit": { "mode"?: string; "scope"?: string };
  "/cmd:create-pr": { "title"?: string };
  "/cmd:generate-bug-spec": { "context"?: string };
  "/cmd:generate-feature-spec": { "context"?: string };
  "/cmd:generate-issue-spec": { "context"?: string };
  "/cmd:generate-prd": { "context"?: string };
  "/cmd:generate-spec": { "context"?: string };
  "/cmd:implement-spec": { "specIdOrNameOrPath": string };
  "/cmd:list-specs": { "folder": string; "status": string; "--search keyword": string; "--sort field": string };
  "/cmd:move-spec": { "specIdOrNameOrPath": string; "targetFolder": string };
  "/cmd:review-spec-implementation": { "specIdOrNameOrPath": string; "format": string };
}

/**
 * Mapping of command names to their argument order from frontmatter
 * Preserves positional argument order regardless of object property order
 */
export const SlashCommandArgOrder = {
  "/cmd:add-spec": ["specId"],
  "/cmd:audit": ["mode", "scope"],
  "/cmd:create-pr": ["title"],
  "/cmd:generate-bug-spec": ["context"],
  "/cmd:generate-feature-spec": ["context"],
  "/cmd:generate-issue-spec": ["context"],
  "/cmd:generate-prd": ["context"],
  "/cmd:generate-spec": ["context"],
  "/cmd:implement-spec": ["specIdOrNameOrPath"],
  "/cmd:list-specs": ["folder", "status", "--search keyword", "--sort field"],
  "/cmd:move-spec": ["specIdOrNameOrPath", "targetFolder"],
  "/cmd:review-spec-implementation": ["specIdOrNameOrPath", "format"]
} as const;

/**
 * Build a type-safe slash command string
 *
 * @param name - Command name (e.g., "/generate-prd")
 * @param args - Command arguments object
 * @returns Formatted command string with escaped quotes
 *
 * @example
 * buildSlashCommand("/generate-prd", { featureName: "auth", context: "Add OAuth" })
 * // Returns: "/generate-prd 'auth' 'Add OAuth'"
 */
export function buildSlashCommand<T extends SlashCommandName>(
  name: T,
  args?: SlashCommandArgs[T]
): string {
  const parts: string[] = [name];
  const argOrder = SlashCommandArgOrder[name];

  // Add arguments in frontmatter order
  if (args && typeof args === "object" && argOrder) {
    for (const argName of argOrder) {
      const value = (args as Record<string, unknown>)[argName];
      // Skip undefined values (optional arguments)
      if (value !== undefined && value !== null) {
        // Escape single quotes in the value
        const escaped = String(value).replace(/'/g, "\\'");
        parts.push(`'${escaped}'`);
      }
    }
  }

  return parts.join(" ");
}

// Individual Args type interfaces
/**
 * Args type for /cmd:add-spec command
 */
export interface CmdAddSpecArgs {
  specId: string;
}

/**
 * Args type for /cmd:audit command
 */
export interface CmdAuditArgs {
  mode?: string;
  scope?: string;
}

/**
 * Args type for /cmd:create-pr command
 */
export interface CmdCreatePrArgs {
  title?: string;
}

/**
 * Args type for /cmd:generate-bug-spec command
 */
export interface CmdGenerateBugSpecArgs {
  context?: string;
}

/**
 * Args type for /cmd:generate-feature-spec command
 */
export interface CmdGenerateFeatureSpecArgs {
  context?: string;
}

/**
 * Args type for /cmd:generate-issue-spec command
 */
export interface CmdGenerateIssueSpecArgs {
  context?: string;
}

/**
 * Args type for /cmd:generate-prd command
 */
export interface CmdGeneratePrdArgs {
  context?: string;
}

/**
 * Args type for /cmd:generate-spec command
 */
export interface CmdGenerateSpecArgs {
  context?: string;
}

/**
 * Args type for /cmd:implement-spec command
 */
export interface CmdImplementSpecArgs {
  specIdOrNameOrPath: string;
}

/**
 * Args type for /cmd:list-specs command
 */
export interface CmdListSpecsArgs {
  folder: string;
  status: string;
  "--search keyword": string;
  "--sort field": string;
}

/**
 * Args type for /cmd:move-spec command
 */
export interface CmdMoveSpecArgs {
  specIdOrNameOrPath: string;
  targetFolder: string;
}

/**
 * Args type for /cmd:review-spec-implementation command
 */
export interface CmdReviewSpecImplementationArgs {
  specIdOrNameOrPath: string;
  format: string;
}

// Response type interfaces
/**
 * Response type for /cmd:create-pr command
 */
export interface CmdCreatePrResponse {
  /** Boolean - true if PR created successfully, false if failed */
  success: boolean;
  /** String - GitHub pull request URL (e.g., "https://github.com/owner/repo/pull/123") or empty string if failed */
  pr_url: string;
  /** String - Git commit SHA (7+ chars) or empty string if failed */
  commit_sha: string;
  /** String - Current git branch name */
  branch_name: string;
  /** String - PR title and commit message (conventional commit format) or empty string if failed */
  title: string;
  /** String - PR description summarizing changes or empty string if failed */
  body: string;
  /** String - Human-readable success/error message */
  message: string;
}

/**
 * Response type for /cmd:generate-bug-spec command
 */
export interface CmdGenerateBugSpecResponse {
  success: boolean;
  spec_folder: string;
  spec_file: string;
  spec_id: string;
  spec_type: string;
  bug_name: string;
  complexity: {
    total: string;
    avg: string;
  };
  files_to_create: string[];
  files_to_modify: string[];
  next_command: string;
}

/**
 * Response type for /cmd:generate-feature-spec command
 */
export interface CmdGenerateFeatureSpecResponse {
  /** Always true if spec generation completed */
  success: boolean;
  /** Path to the created spec folder */
  spec_folder: string;
  /** Full path to the spec file (always spec.md) */
  spec_file: string;
  /** The timestamp-based spec ID in YYMMDDHHmm format (e.g., "2511131522") */
  spec_id: string;
  /** Always "feature" */
  spec_type: string;
  /** Normalized feature name (kebab-case) */
  feature_name: string;
  /** Total and average complexity scores */
  complexity: {
    total: string;
    avg: string;
  };
  /** Array of new files to be created */
  files_to_create: string[];
  /** Array of existing files to be modified */
  files_to_modify: string[];
  /** Suggested next command to run */
  next_command: string;
}

/**
 * Response type for /cmd:generate-issue-spec command
 */
export interface CmdGenerateIssueSpecResponse {
  success: boolean;
  spec_folder: string;
  spec_file: string;
  spec_id: string;
  spec_type: string;
  issue_name: string;
  complexity: {
    total: string;
    avg: string;
  };
  files_to_create: string[];
  files_to_modify: string[];
  next_command: string;
}

/**
 * Response type for /cmd:generate-prd command
 */
export interface CmdGeneratePrdResponse {
  /** Always true if PRD generation completed */
  success: boolean;
  /** Path to the created spec folder */
  spec_folder: string;
  /** Full path to the PRD file (always prd.md) */
  prd_file: string;
  /** The timestamp-based spec ID in YYMMDDHHmm format (e.g., "2511131522") */
  spec_id: string;
  /** Always "prd" */
  spec_type: string;
  /** Normalized feature name (kebab-case) */
  feature_name: string;
  /** Suggested next command to run (add-spec to create implementation spec) */
  next_command: string;
}

/**
 * Response type for /cmd:generate-spec command
 */
export interface CmdGenerateSpecResponse {
  /** Always true if spec generation completed */
  success: boolean;
  /** Path to the created spec folder */
  spec_folder: string;
  /** Full path to the spec file (always spec.md) */
  spec_file: string;
  /** The timestamp-based spec ID in YYMMDDHHmmss format (e.g., "251024120101") */
  spec_id: string;
  /** Normalized feature name (kebab-case) */
  feature_name: string;
  /** Total and average complexity scores */
  complexity: {
    total: string;
    avg: string;
  };
  /** Array of new files to be created */
  files_to_create: string[];
  /** Array of existing files to be modified */
  files_to_modify: string[];
  /** Suggested next command to run */
  next_command: string;
}

/**
 * Response type for /cmd:implement-spec command
 */
export interface CmdImplementSpecResponse {
  /** Boolean - true if all tasks completed successfully, false if any tasks failed or were skipped */
  success: boolean;
  /** String - 1-2 sentences describing what was implemented and key changes + 1 sentence on task/validation status */
  summary: string;
  /** String - Timestamp-based spec ID (e.g., "2511131522") */
  spec_id: string;
  /** String - Full path to the spec file that was implemented */
  spec_file: string;
  /** String - Normalized feature name (lowercase, hyphenated) */
  feature_name: string;
  /** Enum - "completed" | "partial" | "failed" */
  implementation_status: string;
  /** Object - Task completion metrics */
  tasks: {
    total: number;
    completed: number;
    failed: number;
    skipped: number;
  };
  /** Object - Complexity metrics from spec */
  complexity: {
    total_points: number;
    avg_per_task: number;
  };
  /** Object - File change statistics */
  files: {
    created: number;
    modified: number;
    deleted: number;
    paths: {
      created: string[];
      modified: string[];
    };
  };
  /** Object - Line change statistics */
  changes: {
    total_lines_changed: number;
    lines_added: number;
    lines_removed: number;
  };
  /** Object - Validation results */
  validation: {
    passed: boolean;
    checks: {
      build: boolean;
      type_check: boolean;
      lint: boolean;
      tests: boolean;
    };
    failures: unknown[];
  };
  /** Object - Git statistics */
  git: {
    diff_stat: string;
    commits: number;
  };
  /** Object | null - Error details if implementation failed */
  error: null;
}

/**
 * Response type for /cmd:move-spec command
 */
export interface CmdMoveSpecResponse {
  /** Boolean - true if move completed successfully */
  success: boolean;
  /** String - Timestamp-based spec ID (e.g., "2510241201") */
  spec_id: string;
  /** String - Folder name (e.g., "2510241201-workflow-safety") */
  spec_folder: string;
  /** String - Previous relative path from `.agent/specs/` */
  old_path: string;
  /** String - New relative path from `.agent/specs/` */
  new_path: string;
  /** String - Previous folder (backlog/todo/done) */
  old_folder: string;
  /** String - New folder (backlog/todo/done) */
  new_folder: string;
  /** String - Previous status value */
  old_status: string;
  /** String - New status value */
  new_status: string;
  /** String - Success message */
  message: string;
}

/**
 * Response type for /cmd:review-spec-implementation command
 */
export interface CmdReviewSpecImplementationResponse {
  /** True if review passed, false if it failed */
  success: boolean;
  /** Current iteration number (1-based, auto-detected) */
  review_iteration: number;
  /** Always 3 */
  max_iterations: number;
  /** True if review_iteration > 3 */
  max_iterations_reached: boolean;
  /** Path to spec file reviewed */
  spec_path: string;
  /** Current git branch */
  branch: string;
  /** Number of commits since branching */
  commits_reviewed: number;
  /** Total issues in this review iteration */
  issues_found: number;
  /** Count of issues from previous review that were fixed (0 if first review) */
  previous_issues_resolved: number;
  /** Counts by priority level */
  priority_breakdown: {
    high: number;
    medium: number;
  };
  /** Counts by issue category */
  categories: {
    missing_implementations: number;
    incomplete_implementations: number;
    code_quality: number;
  };
  /** Human-readable summary explaining why the review passed/failed, including highlights of key issues and what was fixed from previous reviews */
  summary: string;
}

/**
 * Mapping of slash commands to their JSON response types
 */
export interface SlashCommandResponses {
  "/cmd:create-pr": CmdCreatePrResponse;
  "/cmd:generate-bug-spec": CmdGenerateBugSpecResponse;
  "/cmd:generate-feature-spec": CmdGenerateFeatureSpecResponse;
  "/cmd:generate-issue-spec": CmdGenerateIssueSpecResponse;
  "/cmd:generate-prd": CmdGeneratePrdResponse;
  "/cmd:generate-spec": CmdGenerateSpecResponse;
  "/cmd:implement-spec": CmdImplementSpecResponse;
  "/cmd:move-spec": CmdMoveSpecResponse;
  "/cmd:review-spec-implementation": CmdReviewSpecImplementationResponse;
}
